{% extends 'MonCal/base.html' %}

{% block content %}
<h2>{{subject.name}} の新規予約</h2>
<h2><a href="{% url 'MonCal:property_list' subject.pk %}">スケジュール一覧へ</a></h2>
    <table  width="60%" hight="100%" border="1"  align="left" style="border-collapse: collapse" id="calender">
        <caption><a href="{% url 'MonCal:calendar' subject.pk %}">{{ subject.name }}</a>
            <br>{{ start_day }} - {{ end_day }}
        </caption>
        <thead>
        <tr>
            <th><a href="{% url 'MonCal:calendar' subject.pk before.year before.month before.day %}">前週</a></th>
            {% for day in days %}
              <th>
              {% if day.weekday == 5 %}
                <div style="color: blue;" >
              {% elif day.weekday == 6 %}
                <div style="color: red;" >
              {% else %}
                <div>
              {% endif %}
              {{ day | date:"d(D)" }}</div></th>
            {% endfor %}
            <th><a href="{% url 'MonCal:calendar' subject.pk next.year next.month next.day %}">次週</a></th>
        </tr>
        </thead>
        {% for time, schedules in calendar.items %}
            <tr style="font-size:12px">
                <th>{{ time }}</th>
                {% for dt, book in schedules.items %}
                    {% if book == 'Nothing' %}
                        <td  bgcolor="#d9e5ff" onclick="intime(this,'{{dt}}','{{tailtime}}')" class="">
                    {% elif book == 'same' %}
                        <td bgcolor="#d3d3d3"> ↓↓
                    {% else %}
                        <td bgcolor="#d3d3d3"> <a href="{% url 'MonCal:Property_detail' subject.pk book.pk %}">{{book.title}}</a>
                    {% endif %}
                        </td>
                {% endfor %}
                <th>{{ time }}</th>
            </tr>
        {% endfor %}
    </table>
    
    <form action="" method="POST">
        {% for field in form %}
            {% if field.id_for_label == 'id_starttime' %}
                <p id ="s_timetext">{{field.label}}:</p>
                <p class ="timeform">
            {% elif field.id_for_label == 'id_endtime' %}
                <p id ="e_timetext">{{field.label}}:</p>
                <p class ="timeform" >
            {% else %}
                <p>
            {% endif %}
            {{field.label_tag}}
            {{field}}
            {% for error in field.errors %}
                {{error}}
            {% endfor %}
        </p>
        {% endfor %}
        {% csrf_token %}
        <button type="submit">登録</button>
        <button type="reset" onclick="reset_timeform()">取消</button>
    </form>
    <br clear="left">
{% endblock %}